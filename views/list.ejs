<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="main.css" rel="stylesheet" />


</head>
<body class="grey-bg">

    <%- include('nav.ejs') %>
    
    <div class="white-bg">
    <%  for (let i = 0; i < 글목록.length; i++){ %>    
        <div class="list-box">
            <%= JSON.stringify(글목록[i]) %>
            <h4><a href='/detail/<%= 글목록[i]._id %>'><%= 글목록[i].title %></a>
            <a href="/edit/<%= 글목록[i]._id %>">수정하기</a>
            </h4>
            <span class="delete" data-id="<%= 글목록[i]._id %>">삭제</span>
            <p><%= 글목록[i].content %></p>
        </div>
    <% } %>
    </div> 


    <script>
        document.querySelectorAll('.delete')[0].addEventListener('click', (e)=>{
            // e.target.dataset.id < HTML에서 데이터 저장
            fetch('/delete?docid=' + e.target.dataset.id, {
                method : 'DELETE',
                body : JSON.stringify({})
            })
        })
    </script>
</body>
</html>